import{j as s,d as me,a as ve,b as Ie,c as ke,e as $e,f as Se,g as Re,h as Oe,i as Le,k as c,F as Y,l as fe,m as Z,B as M,v as E,S as g,M as x,T as I,n as ge,I as ae,o as je,p as _e,q as Ee,s as ze,r as De,t as S,G as K,u as Me,w as N,D as Ae,x as Te,y as Je,C as ne,z as Fe,R as Be}from"./vendor.fe7bfcaf.js";const Ge=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}};Ge();const P=n=>n.split("x").map(a=>parseInt(a)),A=n=>{const a={};return n.split(/[\r\n]+/).forEach((o,l)=>{o.split(/ +/).forEach((t,e)=>{const i=t.split("|"),r={type:i[0]};i[0]==="box"&&(r.type="empty",r.item={type:"box",value:parseInt(i[1]),tag:i[2],isRandom:i[1]==="random"}),a[`${e}x${l}`]=r})}),a},le=n=>{var t;let a="",o=0,l=0;Object.keys(n).forEach(e=>{const i=P(e);i[0]+1>o&&(o=i[0]+1),i[1]+1>l&&(l=i[1]+1)});for(let e=0;e<l;e++){for(let i=0;i<o;i++){const r=n[`${i}x${e}`];r?r.type!=="empty"?a+=`${r.type} `:((t=r.item)==null?void 0:t.type)==="box"?a+=`box|${r.item.isRandom?"random":r.item.value}|${r.item.tag||""} `:a+="empty ":a+="nothing "}a=`${a.trim()}
`}return a.trim()},Pe=n=>n[Math.floor(Math.random()*n.length)],xe=(n,a)=>(n=Math.ceil(n),a=Math.floor(a),Math.floor(Math.random()*(a-n+1))+n),T=(n,a)=>{const o=[...n];return a==="left"&&(o[0]-=1),a==="right"&&(o[0]+=1),a==="top"&&(o[1]-=1),a==="bottom"&&(o[1]+=1),a==="top-left"&&(o[0]-=1,o[1]-=1),a==="top-right"&&(o[0]+=1,o[1]-=1),a==="bottom-left"&&(o[0]-=1,o[1]+=1),a==="bottom-right"&&(o[0]+=1,o[1]+=1),o},J=n=>{const o={left:me,right:ve,top:Ie,bottom:ke,"top-left":$e,"top-right":Se,"bottom-left":Re,"bottom-right":Oe,here:Le}[n];return o?s(o,{fontSize:"small"}):null},d=n=>JSON.parse(JSON.stringify(n)),we=(n,a)=>n.find(o=>o.coordinates===a),D=80;function be(n){const a=Object.keys(n.cells).map(l=>{var r;const t=P(l),e=n.cells[l];let i;return(e.type==="empty"||e.type==="nothing")&&(i=null),e.type==="hole"&&(i=s("div",{style:{width:"100%",height:"100%",backgroundColor:"black"}})),e.type==="wall"&&(i="wall"),e.type==="printer"&&(i="printer"),e.type==="shredder"&&(i="shredder"),((r=e.item)==null?void 0:r.type)==="box"&&(i=c(Y,{children:[s(fe,{fontSize:"small"})," ",e.item.isRandom&&!n.run?"?":e.item.value]})),s("div",{onClick:()=>n.onClick(l),style:{position:"absolute",left:t[0]*D,top:t[1]*D,width:D,height:D,borderStyle:e.type==="nothing"?"dotted":"solid",borderColor:"black",borderWidth:1,display:"flex",alignItems:"center",justifyContent:"center"},children:i},l)}),o=n.characters.map(l=>{var e;const t=P(l.coordinates);return c("div",{style:{position:"absolute",opacity:l.terminated?0:1,transform:`translate(${t[0]*D}px, ${t[1]*D+10}px)`,transition:`all ${n.speed}ms ease-in`},children:[s(Z,{fontSize:"small",style:{color:l.color}}),((e=l.item)==null?void 0:e.type)==="box"?c(Y,{children:["(",s(fe,{fontSize:"small"})," ",l.item.value,")"]}):null]},l.name)});return c("div",{style:{position:"relative",width:n.width*D+D/2,height:n.height*D+D/2},children:[a,o]})}const We=[{type:"step",add:n=>{n.push({type:"step",destination:{type:"direction",directions:["left"]},id:E()})}},{type:"give",add:n=>{n.push({type:"give",direction:{type:"direction",value:"left"},id:E()})}},{type:"take",add:n=>{n.push({type:"take",direction:{type:"direction",value:"left"},id:E()})}},{type:"goto",add:n=>{n.push({type:"goto",step:0,id:E()})}},{type:"pickup",add:n=>{n.push({type:"pickup",id:E()})}},{type:"drop",add:n=>{n.push({type:"drop",id:E()})}},{type:"if",add:n=>{const a=E();n.push({type:"if",conditions:[{value1:{type:"direction",value:"here"},operation:"==",value2:{type:"number",value:0},logic:"OR"}],id:a},{type:"endif",ifId:a})}},{type:"near",add:n=>{n.push({type:"near",find:"wall",slot:1,id:E()})}},{type:"variable",add:n=>{n.push({type:"variable",slot:1,value:{type:"number",value:0},id:E()})}},{type:"say",add:n=>{n.push({type:"say",text:"hi",target:{type:"direction",value:"left"},id:E()})}},{type:"hear",add:n=>{n.push({type:"hear",text:"hi",id:E()})}},{type:"foreach",add:n=>{const a=E();n.push({type:"foreach",directions:["left"],slot:1,id:a},{type:"endforeach",foreachId:a})}}];function qe(n){return s(Y,{children:We.map(a=>s("div",{children:s(M,{onClick:()=>{const o=[...n.code];a.add(o),n.setCode(o)},children:`Add ${a.type}`})},a.type))})}const Ve=(n,a,o,l)=>c("span",{children:["Step:"," ",s(g,{IconComponent:null,value:n.destination.type,onChange:t=>{const e=d(o);t.target.value==="direction"&&(e[a].destination={type:"direction",directions:["left"]}),t.target.value==="slot"&&(e[a].destination={type:"slot",slot:1}),l(e)},variant:"standard",children:["direction","slot"].map(t=>s(x,{value:t,children:t},t))}),n.destination.type==="direction"&&s(g,{IconComponent:null,value:n.destination.directions,variant:"standard",multiple:!0,onChange:t=>{const e=d(o);e[a].destination.directions=t.target.value,l(e)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),n.destination.type==="slot"&&s(I,{type:"number",value:n.destination.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].destination.slot=parseInt(t.target.value)||0,l(e)}})]}),He=(n,a,o,l)=>c("span",{children:["Give:"," ",s(Z,{fontSize:"small"}),s(ve,{fontSize:"small"}),s(ge,{fontSize:"small"})," ",s(g,{IconComponent:null,value:n.direction.type,onChange:t=>{const e=d(o);t.target.value==="direction"&&(e[a].direction={type:"direction",value:"left"}),t.target.value==="slot"&&(e[a].direction={type:"slot",slot:1}),l(e)},variant:"standard",children:["direction","slot"].map(t=>s(x,{value:t,children:t},t))}),s(g,{IconComponent:null,value:n.direction.value,variant:"standard",onChange:t=>{const e=d(o);e[a].direction.value=t.target.value,l(e)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),n.direction.type==="slot"&&s(I,{type:"number",value:n.direction.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].direction.slot=parseInt(t.target.value)||0,l(e)}})]}),Qe=(n,a,o,l)=>c("span",{children:["Take"," ",s(Z,{fontSize:"small"}),s(me,{fontSize:"small"}),s(ge,{fontSize:"small"})," ",s(g,{IconComponent:null,value:n.direction.type,onChange:t=>{const e=d(o);t.target.value==="direction"&&(e[a].direction={type:"direction",value:"left"}),t.target.value==="slot"&&(e[a].direction={type:"slot",slot:1}),l(e)},variant:"standard",children:["direction","slot"].map(t=>s(x,{value:t,children:t},t))}),s(g,{IconComponent:null,value:n.direction.value,variant:"standard",onChange:t=>{const e=d(o);e[a].direction.value=t.target.value,l(e)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),n.direction.type==="slot"&&s(I,{type:"number",value:n.direction.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].direction.slot=parseInt(t.target.value)||0,l(e)}})]}),Ue=(n,a,o,l)=>c("span",{children:["Goto:"," ",s(g,{IconComponent:null,value:n.step,variant:"standard",onChange:t=>{const e=d(o);e[a].step=t.target.value,l(e)},children:Object.keys(o).map(t=>s(x,{value:t,children:t},t))})]}),Xe=(n,a,o,l)=>c("span",{children:["If:"," ",n.conditions.map((t,e)=>c("span",{children:[s(g,{IconComponent:null,value:t.logic,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].logic=i.target.value,l(r)},children:["OR","AND"].map(i=>s(x,{value:i,children:i},i))}),s(g,{IconComponent:null,value:t.value1.type,onChange:i=>{const r=d(o);i.target.value==="myitem"&&(r[a].conditions[e].value1={type:"myitem"}),i.target.value==="direction"&&(r[a].conditions[e].value1={type:"direction",value:"left"}),i.target.value==="slot"&&(r[a].conditions[e].value1={type:"slot",slot:1}),l(r)},variant:"standard",children:["direction","myitem","slot"].map(i=>s(x,{value:i,children:i},i))}),t.value1.type==="direction"&&s(g,{IconComponent:null,value:t.value1.value,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].value1.value=i.target.value,l(r)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(i=>c(x,{value:i,children:[J(i),i]},i))}),t.value1.type==="slot"&&s(I,{type:"number",value:t.value1.slot,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].value1.slot=parseInt(i.target.value)||0,l(r)}}),s(g,{IconComponent:null,value:t.operation,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].operation=i.target.value,l(r)},children:["==",">","<",">=","<="].map(i=>s(x,{value:i,children:i},i))}),s(g,{IconComponent:null,value:n.conditions[e].value2.type,onChange:i=>{const r=d(o);i.target.value==="number"&&(r[a].conditions[e].value2={type:"number",value:0}),i.target.value==="myitem"&&(r[a].conditions[e].value2={type:"myitem"}),i.target.value==="direction"&&(r[a].conditions[e].value2={type:"direction",value:"left"}),i.target.value==="slot"&&(r[a].conditions[e].value2={type:"slot",slot:1}),i.target.value==="something"&&(r[a].conditions[e].value2={type:"something"}),i.target.value==="empty"&&(r[a].conditions[e].value2={type:"empty"}),i.target.value==="hole"&&(r[a].conditions[e].value2={type:"hole"}),i.target.value==="character"&&(r[a].conditions[e].value2={type:"character"}),l(r)},variant:"standard",children:["number","direction","slot","myitem","something","empty","hole","character","box"].map(i=>s(x,{value:i,children:i},i))}),t.value2.type==="number"&&s(I,{type:"number",value:t.value2.value,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].value2.value=parseInt(i.target.value)||0,l(r)}}),t.value2.type==="direction"&&s(g,{IconComponent:null,value:t.value2.value,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].value2.value=i.target.value,l(r)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(i=>c(x,{value:i,children:[J(i),i]},i))}),t.value2.type==="slot"&&s(I,{type:"number",value:t.value2.slot,variant:"standard",onChange:i=>{const r=d(o);r[a].conditions[e].value2.slot=parseInt(i.target.value)||0,l(r)}}),s(ae,{size:"small",onMouseDown:()=>{const i=d(o);i[a].conditions.splice(e,1),l(i)},children:s(je,{})}),s(ae,{size:"small",onMouseDown:()=>{const i=d(o);i[a].conditions.push({value1:{type:"direction",value:"here"},operation:"==",value2:{type:"number",value:0},logic:"OR"}),l(i)},children:s(_e,{})})]},e))]}),Ye=()=>"Pickup",Ze=()=>"Drop",Ke=(n,a,o,l)=>c("span",{children:["Near:"," ","slot",s(I,{type:"number",value:n.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].slot=parseInt(t.target.value)||0,l(e)}}),"=",s(g,{IconComponent:null,value:n.find,onChange:t=>{const e=d(o);e[a].find=t.target.value,l(e)},variant:"standard",children:["box","wall","hole","character","printer","shredder"].map(t=>s(x,{value:t,children:t},t))})]}),Ne=(n,a,o,l)=>c("span",{children:["Variable"," ","slot",s(I,{type:"number",value:n.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].slot=parseInt(t.target.value)||0,l(e)}}),"=",s(g,{IconComponent:null,value:n.value.type,onChange:t=>{const e=d(o);t.target.value==="number"&&(e[a].value={type:"number",value:0}),t.target.value==="myitem"&&(e[a].value={type:"myitem"}),t.target.value==="direction"&&(e[a].value={type:"direction",value:"left"}),t.target.value==="slot"&&(e[a].value={type:"slot",slot:1}),l(e)},variant:"standard",children:["number","direction","slot","myitem"].map(t=>s(x,{value:t,children:t},t))}),n.value.type==="number"&&s(I,{type:"number",value:n.value.value,variant:"standard",onChange:t=>{const e=d(o);e[a].value.value=parseInt(t.target.value)||0,l(e)}}),n.value.type==="direction"&&s(g,{IconComponent:null,value:n.value.value,variant:"standard",onChange:t=>{const e=d(o);e[a].value.value=t.target.value,l(e)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),n.value.type==="slot"&&s(I,{type:"number",value:n.value.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].value.slot=parseInt(t.target.value)||0,l(e)}})]}),et=(n,a,o,l)=>c("span",{children:["Say:"," ",s(I,{value:n.text,variant:"standard",onChange:t=>{const e=d(o);e[a].text=t.target.value,l(e)}}),s(g,{IconComponent:null,value:n.target.type,onChange:t=>{const e=d(o);t.target.value==="direction"&&(e[a].target={type:"direction",value:"left"}),t.target.value==="slot"&&(e[a].target={type:"slot",slot:1}),l(e)},variant:"standard",children:["direction","slot"].map(t=>s(x,{value:t,children:t},t))}),s(g,{IconComponent:null,value:n.target.value,variant:"standard",onChange:t=>{const e=d(o);e[a].target.value=t.target.value,l(e)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),n.target.type==="slot"&&s(I,{type:"number",value:n.target.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].target.slot=parseInt(t.target.value)||0,l(e)}})]}),tt=(n,a,o,l)=>c("span",{children:["Hear:"," ",s(I,{value:n.text,variant:"standard",onChange:t=>{const e=d(o);e[a].text=t.target.value,l(e)}})]}),at=(n,a,o,l)=>c("span",{children:["Foreach:"," ",s(g,{IconComponent:null,value:n.directions,variant:"standard",multiple:!0,onChange:t=>{const e=d(o);e[a].directions=t.target.value,l(e)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(t=>c(x,{value:t,children:[J(t),t]},t))}),s(I,{type:"number",value:n.slot,variant:"standard",onChange:t=>{const e=d(o);e[a].slot=parseInt(t.target.value)||0,l(e)}})]});function nt(n,a,o,l,t){let e=null;return n.type==="step"&&(e=Ve(n,a,o,l)),n.type==="give"&&(e=He(n,a,o,l)),n.type==="take"&&(e=Qe(n,a,o,l)),n.type==="goto"&&(e=Ue(n,a,o,l)),n.type==="if"&&(e=Xe(n,a,o,l)),n.type==="endif"&&(e="Endif"),n.type==="pickup"&&(e=Ye()),n.type==="drop"&&(e=Ze()),n.type==="near"&&(e=Ke(n,a,o,l)),n.type==="variable"&&(e=Ne(n,a,o,l)),n.type==="say"&&(e=et(n,a,o,l)),n.type==="hear"&&(e=tt(n,a,o,l)),n.type==="foreach"&&(e=at(n,a,o,l)),n.type==="endforeach"&&(e="Endforeach"),e||(e=JSON.stringify(n)),n.type==="endif"&&(t-=20),n.type==="endforeach"&&(t-=20),e=c("span",{children:[a,": ",s("span",{style:{paddingLeft:t},children:e}),s(ae,{size:"small",onMouseDown:()=>{const i=[...o],r=i[a];i.splice(a,1),r.type==="if"&&i.splice(i.findIndex(w=>w.type==="endif"&&w.ifId===r.id),1),r.type==="endif"&&i.splice(i.findIndex(w=>w.type==="if"&&w.id===r.ifId),1),r.type==="foreach"&&i.splice(i.findIndex(w=>w.type==="endforeach"&&w.foreachId===r.id),1),r.type==="endforeach"&&i.splice(i.findIndex(w=>w.type==="foreach"&&w.id===r.foreachId),1),l(i)},children:s(Ee,{fontSize:"small"})})]},a),n.type==="if"&&(t+=20),n.type==="foreach"&&(t+=20),{result:e,intend:t}}const lt=ze(({children:n})=>s("div",{children:n})),ot=De(({children:n})=>s("div",{children:n}));function it(n){const[a,o]=S.exports.useState(n.level),[l,t]=S.exports.useState(n.level.characters),[e,i]=S.exports.useState(n.level.code),[r,w]=S.exports.useState(!1),[H,X]=S.exports.useState(-1),[F,u]=S.exports.useState(1e3);S.exports.useEffect(()=>{o(n.level),t(n.level.characters),i(n.level.code)},[n.level]),S.exports.useEffect(()=>{if(!r)return;const v=setInterval(()=>X(y=>y+1),F);return()=>clearInterval(v)},[F,r]),S.exports.useEffect(()=>{if(H===-1)return;const v=d(l),y=d(a),k=[];v.forEach((p,b)=>{var W,O,B,q;if(k[b]=p.coordinates,p.terminated||(p.step++,p.step===-1))return;const f=e[p.step];if(!f)return;const L=P(p.coordinates);if(f.type==="step"){const $=Pe(f.destination.directions),h=T(L,$),C=a.cells[h.join("x")];C&&["empty","hole"].includes(C.type)&&(k[b]=h.join("x"))}if(f.type==="goto"&&(p.step=f.step-1),f.type==="pickup"&&!p.item&&((W=y.cells[p.coordinates].item)==null?void 0:W.type)==="box"&&(p.item=y.cells[p.coordinates].item,delete y.cells[p.coordinates].item),f.type==="drop"&&((O=p.item)==null?void 0:O.type)==="box"&&!y.cells[p.coordinates].item&&(y.cells[p.coordinates].item=p.item,delete p.item),f.type==="take"){const $=T(L,f.direction.value).join("x");!p.item&&((B=y.cells[$])==null?void 0:B.type)==="printer"&&(p.item={type:"box",value:xe(0,99)},y.cells[$].printed++)}if(f.type==="give"){const $=T(L,f.direction.value).join("x");p.item&&((q=y.cells[$])==null?void 0:q.type)==="shredder"&&(delete p.item,y.cells[$].shredded++)}if(f.type==="hear"&&(p.wait=f.text,p.step--),f.type==="say"&&f.target.type==="direction"){const $=T(L,f.target.value).join("x"),h=v.find(C=>C.coordinates===$);h&&h.wait===f.text&&(h.wait="",h.step++)}if(f.type==="if"){let $=!1;if(f.conditions.forEach(h=>{var oe,ie,se,re,pe,de,ce,ue,he,ye;let C=!1,z,_,Q,V,U;if(h.value1.type==="direction"){const G=T(L,h.value1.value).join("x");z=(ie=(oe=l.find(te=>h.value1.value!=="here"&&te.coordinates===G))==null?void 0:oe.item)==null?void 0:ie.value,z===void 0&&(z=(re=(se=y.cells[G])==null?void 0:se.item)==null?void 0:re.value),Q=(pe=y.cells[G])==null?void 0:pe.type}else h.value1.type==="slot"||h.value1.type==="myitem"&&p.item&&(z=p.item.value,Q=p.item.type);if(h.value2.type==="direction"){const G=T(L,h.value2.value).join("x");_=(ce=(de=l.find(te=>h.value2.value!=="here"&&te.coordinates===G))==null?void 0:de.item)==null?void 0:ce.value,_===void 0&&(_=(he=(ue=y.cells[G])==null?void 0:ue.item)==null?void 0:he.value),V=(ye=y.cells[G])==null?void 0:ye.type,C=z===_}else h.value2.type==="slot"||(h.value2.type==="myitem"?(p.item&&(_=p.item.value,V=p.item.type),U="number"):h.value2.type==="number"?(_=h.value2.value,U="number"):(V=h.value2.type,C=Q===V,U="type"));U==="number"&&(h.operation==="=="&&(C=z===_),h.operation==="!="&&(C=z!==_),h.operation===">"&&(C=z>_),h.operation==="<"&&(C=z<_),h.operation==="<="&&(C=z<=_),h.operation===">="&&(C=z>=_)),U==="type"&&(h.operation==="=="&&(C=Q===V),h.operation==="!="&&(C=Q!==V)),h.logic==="OR"?$=$||C:$=$&&C}),!$){let h=0;for(h=p.step;h<e.length&&e[h].type!=="endif";h++);p.step=h}}}),v.forEach((p,b)=>{!e[p.step]||(!l.find(L=>L.coordinates===k[b])||l.find((L,W)=>L.coordinates===k[b]&&p.coordinates===k[W])?(p.coordinates=k[b],a.cells[p.coordinates].type==="hole"&&(p.terminated=!0)):e[p.step].type==="step"&&p.step--)});const R=[];v.forEach((p,b)=>{var L;const f=e[p.step];if(!!f&&!R.includes(p.name)&&f.type==="give"&&((L=p.item)==null?void 0:L.type)==="box"){const W=T(P(p.coordinates),f.direction.value),O=v.find(q=>q.coordinates===W.join("x")),B=O?e[O.step]:null;if(O)if(!O.item)O.item=p.item,delete p.item,R.push(O.name);else if(O.item&&(B==null?void 0:B.type)==="give"&&T(P(O.coordinates),B.direction.value).join("x")===p.coordinates){const q=p.item;p.item=O.item,O.item=q,R.push(O.name)}else p.step--}}),t(v),o(y)},[H]);let m=0;const j=S.exports.useMemo(()=>e.map((v,y)=>{const k=nt(v,y,e,i,m);return m=k.intend,k.result}),[e]);return c(K,{container:!0,children:[c(K,{item:!0,md:6,children:[s("h2",{children:a.task}),s("h4",{children:r&&n.level.win(a.cells,l)?"Win":null}),s(be,{cells:a.cells,characters:l,width:a.width,height:a.height,run:r,speed:F})]}),s(K,{item:!0,md:1,children:s(qe,{code:e,setCode:i})}),s(K,{item:!0,md:5,children:c("div",{style:{paddingLeft:20},children:[s(ot,{onSortEnd:({oldIndex:v,newIndex:y},k)=>{if(k.ctrlKey){const R=d(e);R.splice(y,0,e[v]),i(R)}else{const R=Me(e,v,y),p=[];if(R.forEach(b=>{b.type==="if"&&p.push(b.id),b.type==="endif"&&p[p.length-1]===b.ifId&&p.splice(p.indexOf(b.ifId),1),b.type==="foreach"&&p.push(b.id),b.type==="endforeach"&&p[p.length-1]===b.foreachId&&p.splice(p.indexOf(b.foreachId),1)}),p.length)return;i(R)}},children:e.map((v,y)=>c(lt,{index:y,children:[l.filter(R=>R.step===y).map(R=>s("span",{children:s(Z,{fontSize:"small",style:{color:R.color}})},R.name)),j[y]]},y))}),c("div",{style:{paddingTop:20},children:["Speed:"," ",s("input",{type:"number",value:1e3/F,onChange:v=>u(1e3/(parseInt(v.target.value)||1))})]}),s("div",{children:s(M,{onClick:()=>{const v=d(n.level);r||Object.values(v.cells).forEach(y=>{var k;((k=y.item)==null?void 0:k.isRandom)&&(y.item.value=xe(0,99))}),o(v),t(n.level.characters),w(!r)},disabled:m!==0,children:r?"Stop":"Run"})}),s("div",{children:s(M,{onClick:()=>N(JSON.stringify(e,null,2)),children:"Copy"})})]})})]})}const st={task:"Remove two boxes",width:5,height:7,cells:A(`box|1 box|1 empty box|1 empty
empty empty wall box|2 empty
empty empty wall box|3 empty
empty empty empty box|4 empty
empty empty empty box|5 empty
hole hole
hole hole`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[],win:(n,a)=>Object.values(n).filter(o=>{var l;return((l=o.item)==null?void 0:l.type)==="box"}).length+a.filter(o=>{var l;return!o.terminated&&((l=o.item)==null?void 0:l.type)==="box"}).length===5},rt={task:"Move boxes",width:5,height:5,cells:A(`box|1 box|1 empty box|1 empty
empty empty wall box|2 empty
empty empty wall box|3 empty
empty empty empty box|4 empty
empty empty empty box|5 empty`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"pickup"},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"drop"},{type:"goto",step:0}],win:(n,a)=>Object.values(n).filter(o=>{var l;return((l=o.item)==null?void 0:l.type)==="box"}).length+a.filter(o=>{var l;return((l=o.item)==null?void 0:l.type)==="box"}).length===5},pt={task:"Remove only box with 2",width:5,height:7,cells:A(`empty empty empty empty empty
box|2|tag2 box|1|tag1 wall empty empty
empty empty wall empty empty
empty empty empty empty empty
empty empty empty empty empty
hole hole
hole hole`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[{type:"step",destination:{type:"direction",directions:["bottom"]}},{type:"if",conditions:[{value1:{type:"direction",value:"here"},operation:">",value2:{type:"number",value:1},logic:"OR"}],id:"if1"},{type:"pickup"},{type:"endif",ifId:"if1"},{type:"goto",step:0}],win:(n,a)=>(Object.values(n).find(o=>{var l;return((l=o.item)==null?void 0:l.tag)==="tag1"})||a.find(o=>{var l;return((l=o.item)==null?void 0:l.tag)==="tag1"}))&&!(Object.values(n).find(o=>{var l;return((l=o.item)==null?void 0:l.tag)==="tag2"})||a.find(o=>{var l;return!o.terminated&&((l=o.item)==null?void 0:l.tag)==="tag2"}))},dt={task:"Diagonal boxes",width:5,height:7,cells:A(`empty empty empty empty empty
box|1 box|1 box|1 box|1 box|1
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"1x1",name:"first",color:"red",step:-1},{coordinates:"2x1",name:"second",color:"green",step:-1},{coordinates:"3x1",name:"3",color:"yellow",step:-1},{coordinates:"4x1",name:"4",color:"blue",step:-1}],code:[],win:(n,a)=>[0,1,2,3,4].every(o=>{var l;return((l=n[`${o}x${o+1}`].item)==null?void 0:l.type)==="box"})},ct={task:"Sort numbers",width:5,height:5,cells:A(`empty empty empty empty empty
box|random box|0 box|random box|random box|random
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"0x1",name:"1",color:"purple",step:-1},{coordinates:"1x1",name:"2",color:"red",step:-1},{coordinates:"2x1",name:"3",color:"green",step:-1},{coordinates:"3x1",name:"4",color:"yellow",step:-1},{coordinates:"4x1",name:"5",color:"blue",step:-1}],code:[{type:"pickup"},{type:"if",id:"if1",conditions:[{value1:{type:"direction",value:"right"},operation:"<",value2:{type:"myitem"},logic:"OR"}]},{type:"give",direction:{type:"direction",value:"right"}},{type:"endif",ifId:"if1"},{type:"if",id:"if2",conditions:[{value1:{type:"direction",value:"left"},operation:">",value2:{type:"myitem"},logic:"OR"}]},{type:"give",direction:{type:"direction",value:"left"}},{type:"endif",ifId:"if2"},{type:"goto",step:1}],win:(n,a)=>[0,1,2,3,4].every(o=>{var l,t,e,i;return o===0||((t=(l=we(a,`${o}x1`))==null?void 0:l.item)==null?void 0:t.value)>=((i=(e=we(a,`${o-1}x1`))==null?void 0:e.item)==null?void 0:i.value)})},ut={task:"Print and shred 10 boxes",width:5,height:5,cells:A(`empty empty empty empty empty
empty empty empty empty empty
empty printer shredder empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"1x1",name:"first",color:"red",step:-1},{coordinates:"2x1",name:"second",color:"green",step:-1}],code:[],win:(n,a)=>n["2x2"].shredded>=10},ht={task:"Print and shred 10 boxes (no move)",width:7,height:5,cells:A(`hole hole hole hole hole hole hole
hole empty empty empty empty empty hole
hole printer hole hole hole shredder hole
hole hole hole hole hole hole hole
hole hole hole hole hole hole hole`),characters:[{coordinates:"1x1",name:"1",color:"purple",step:-1},{coordinates:"2x1",name:"2",color:"red",step:-1},{coordinates:"3x1",name:"3",color:"green",step:-1},{coordinates:"4x1",name:"4",color:"yellow",step:-1},{coordinates:"5x1",name:"5",color:"blue",step:-1}],code:[],win:(n,a)=>n["5x2"].shredded>=10},ee=[st,rt,pt,dt,ct,ut,ht];function yt(n){var X,F;const[a,o]=S.exports.useState({cells:A("empty"),code:[],characters:[],height:1,width:1,task:"",win:(u,m)=>!1}),[l,t]=S.exports.useState(!1),e=a.cells[l],[i,r]=S.exports.useState(0),w=(u,m)=>{const j=d(a);for(let v=0;v<u;v++)for(let y=0;y<m;y++)j.cells[`${v}x${y}`]||(j.cells[`${v}x${y}`]={type:"nothing"});j.width=u,j.height=m,o(j)},H=`{
        task: ${JSON.stringify(a.task)},
        code: [],
        cells: \`${le(a.cells)}\`,
        characters: ${JSON.stringify(a.characters,null,2)},
        width: ${a.width},
        height: ${a.height},
        win: ${((X=a.win)==null?void 0:X.toString())||"null"}
    }`;return c("div",{children:[c("div",{children:[s(g,{variant:"standard",value:i,onChange:u=>r(parseInt(u.target.value)),children:ee.map((u,m)=>s(x,{value:m,children:u.task},m))}),s(M,{onClick:()=>o(ee[i]),children:"Import"})]}),c("div",{children:[s(I,{label:"width",value:a.width,variant:"standard",onChange:u=>w(parseInt(u.target.value),a.height)}),s(I,{label:"height",value:a.height,variant:"standard",onChange:u=>w(a.width,parseInt(u.target.value))}),s(M,{onClick:()=>{const u=d(a);Object.keys(u.cells).forEach(m=>{const j=P(m);(j[0]>u.width-1||j[1]>u.height-1)&&delete u.cells[m]}),o(u)},children:"Crop"})]}),s(be,{cells:a.cells,characters:a.characters,width:a.width,height:a.height,run:!1,speed:0,onClick:u=>t(u)}),c("div",{children:[c("div",{children:[s(M,{onClick:()=>N(le(a.cells)),children:"Copy cells"}),s(M,{onClick:()=>N(JSON.stringify(a.characters,null,2)),children:"Copy characters"}),s(M,{onClick:()=>N(H),children:"Copy level"})]}),c("pre",{children:[s("div",{children:H}),s("div",{children:le(a.cells)}),s("div",{children:JSON.stringify(a,(u,m)=>typeof m=="function"?`${m}`:m,2)})]})]}),c(Ae,{open:l!==!1,onClose:()=>t(!1),children:[s(Te,{children:l}),c(Je,{children:[s("div",{children:s(g,{value:e==null?void 0:e.type,onChange:u=>{const m=d(a);m.cells[l].type=u.target.value,o(m)},children:["nothing","empty","printer","shredder","wall"].map(u=>s(x,{value:u,children:u},u))})}),(e==null?void 0:e.type)==="empty"?c("div",{children:["Item:"," ",s(ne,{checked:!!(e==null?void 0:e.item),onChange:u=>{const m=d(a);m.cells[l].item=u.target.checked?{type:"box",value:0}:null,o(m)}})]}):null,(e==null?void 0:e.item)?s("div",{children:s(I,{label:"Item value",value:(F=e==null?void 0:e.item)==null?void 0:F.value,variant:"standard",onChange:u=>{const m=d(a);m.cells[l].item.value=parseInt(u.target.value),o(m)}})}):null,(e==null?void 0:e.type)==="empty"?c("div",{children:["Character:"," ",s(ne,{checked:!!a.characters.find(u=>u.coordinates===l),onChange:u=>{const m=d(a);u.target.checked?m.characters.push({color:"green",name:`${m.characters.length+1}`,step:-1,coordinates:l}):m.characters.splice(m.characters.findIndex(j=>j.coordinates===l),1),o(m)}})]}):null]})]})]})}function mt(){const[n,a]=S.exports.useState(0),[o,l]=S.exports.useState(!1);return c("div",{className:"App",children:[s("h1",{children:"Open7BH"}),c("div",{children:["Editor:"," ",s(ne,{onChange:t=>l(t.target.checked),checked:o})]}),o?s(yt,{}):c(Y,{children:[s("div",{children:s(g,{variant:"standard",value:n,onChange:t=>a(parseInt(t.target.value)),children:ee.map((t,e)=>s(x,{value:e,children:t.task},e))})}),s(it,{level:ee[n]})]})]})}const vt="modulepreload",Ce={},ft="./",gt=function(a,o){return!o||o.length===0?a():Promise.all(o.map(l=>{if(l=`${ft}${l}`,l in Ce)return;Ce[l]=!0;const t=l.endsWith(".css"),e=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${e}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":vt,t||(i.as="script",i.crossOrigin=""),i.href=l,document.head.appendChild(i),t)return new Promise((r,w)=>{i.addEventListener("load",r),i.addEventListener("error",w)})})).then(()=>a())},xt=n=>{n&&n instanceof Function&&gt(()=>import("./web-vitals.67dce932.js"),[]).then(({getCLS:a,getFID:o,getFCP:l,getLCP:t,getTTFB:e})=>{a(n),o(n),l(n),t(n),e(n)})},wt=Fe.createRoot(document.getElementById("root"));wt.render(s(Be.StrictMode,{children:s(mt,{})}));xt();
