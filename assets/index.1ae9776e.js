import{j as l,d as ae,a as ie,b as he,c as ue,e as me,f as ve,g as fe,h as ge,i as xe,k as p,F as H,l as le,m as K,B as D,v as j,S as v,M as f,T as b,n as re,I as we,o as be,s as Ce,p as Ie,r as k,G as Q,q as ke,t as U,D as Se,u as $e,w as Le,C as Y,x as Oe,R as Re}from"./vendor.9cd26e6b.js";const je=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}};je();const F=n=>n.split("x").map(o=>parseInt(o)),M=n=>{const o={};return n.split(/[\r\n]+/).forEach((i,a)=>{i.split(/ +/).forEach((e,t)=>{const r=e.split("|"),y={type:r[0]};r[0]==="box"&&(y.type="empty",y.item={type:"box",value:parseInt(r[1]),tag:r[2],isRandom:r[1]==="random"}),o[`${t}x${a}`]=y})}),o},Z=n=>{var e;let o="",i=0,a=0;Object.keys(n).forEach(t=>{const r=F(t);r[0]+1>i&&(i=r[0]+1),r[1]+1>a&&(a=r[1]+1)});for(let t=0;t<a;t++){for(let r=0;r<i;r++){const y=n[`${r}x${t}`];y?y.type!=="empty"?o+=`${y.type} `:((e=y.item)==null?void 0:e.type)==="box"?o+=`box|${y.item.isRandom?"random":y.item.value}|${y.item.tag||""} `:o+="empty ":o+="nothing "}o=`${o.trim()}
`}return o.trim()},Ee=n=>n[Math.floor(Math.random()*n.length)],se=(n,o)=>(n=Math.ceil(n),o=Math.floor(o),Math.floor(Math.random()*(o-n+1))+n),W=(n,o)=>{const i=[...n];return o==="left"&&(i[0]-=1),o==="right"&&(i[0]+=1),o==="top"&&(i[1]-=1),o==="bottom"&&(i[1]+=1),o==="top-left"&&(i[0]-=1,i[1]-=1),o==="top-right"&&(i[0]+=1,i[1]-=1),o==="bottom-left"&&(i[0]-=1,i[1]+=1),o==="bottom-right"&&(i[0]+=1,i[1]+=1),i},A=n=>{const i={left:ae,right:ie,top:he,bottom:ue,"top-left":me,"top-right":ve,"bottom-left":fe,"bottom-right":ge,here:xe}[n];return i?l(i,{fontSize:"small"}):null},d=n=>JSON.parse(JSON.stringify(n)),de=(n,o)=>n.find(i=>i.coordinates===o),_=80;function pe(n){const o=Object.keys(n.cells).map(a=>{var y;const e=F(a),t=n.cells[a];let r;return(t.type==="empty"||t.type==="nothing")&&(r=null),t.type==="hole"&&(r=l("div",{style:{width:"100%",height:"100%",backgroundColor:"black"}})),t.type==="wall"&&(r="wall"),t.type==="printer"&&(r="printer"),t.type==="shredder"&&(r="shredder"),((y=t.item)==null?void 0:y.type)==="box"&&(r=p(H,{children:[l(le,{fontSize:"small"})," ",t.item.isRandom&&!n.run?"?":t.item.value]})),l("div",{onClick:()=>n.onClick(a),style:{position:"absolute",left:e[0]*_,top:e[1]*_,width:_,height:_,borderStyle:t.type==="nothing"?"dotted":"solid",borderColor:"black",borderWidth:1,display:"flex",alignItems:"center",justifyContent:"center"},children:r},a)}),i=n.characters.map(a=>{var t;const e=F(a.coordinates);return p("div",{style:{position:"absolute",opacity:a.terminated?0:1,transform:`translate(${e[0]*_}px, ${e[1]*_+10}px)`,transition:`all ${n.speed}ms ease-in`},children:[l(K,{fontSize:"small",style:{color:a.color}}),((t=a.item)==null?void 0:t.type)==="box"?p(H,{children:["(",l(le,{fontSize:"small"})," ",a.item.value,")"]}):null]},a.name)});return p("div",{style:{position:"relative",width:n.width*_+_/2,height:n.height*_+_/2},children:[o,i]})}const _e=[{type:"step",add:n=>{n.push({type:"step",destination:{type:"direction",directions:["left"]},id:j()})}},{type:"give",add:n=>{n.push({type:"give",direction:{type:"direction",value:"left"},id:j()})}},{type:"take",add:n=>{n.push({type:"take",direction:{type:"direction",value:"left"},id:j()})}},{type:"goto",add:n=>{n.push({type:"goto",step:0,id:j()})}},{type:"pickup",add:n=>{n.push({type:"pickup",id:j()})}},{type:"drop",add:n=>{n.push({type:"drop",id:j()})}},{type:"if",add:n=>{const o=j();n.push({type:"if",conditions:[{value1:{type:"direction",value:"here"},operation:"==",value2:{type:"number",value:0}}],id:o},{type:"endif",ifId:o})}},{type:"near",add:n=>{n.push({type:"near",find:"wall",slot:1,id:j()})}},{type:"variable",add:n=>{n.push({type:"variable",slot:1,value:{type:"number",value:0},id:j()})}},{type:"say",add:n=>{n.push({type:"say",text:"hi",target:{type:"direction",value:"left"},id:j()})}},{type:"hear",add:n=>{n.push({type:"hear",text:"hi",id:j()})}},{type:"foreach",add:n=>{const o=j();n.push({type:"foreach",directions:["left"],slot:1,id:o},{type:"endforeach",foreachId:o})}}];function ze(n){return l(H,{children:_e.map(o=>l("div",{children:l(D,{onClick:()=>{const i=[...n.code];o.add(i),n.setCode(i)},children:`Add ${o.type}`})},o.type))})}const De=(n,o,i,a)=>p("span",{children:["Step:"," ",l(v,{IconComponent:null,value:n.destination.type,onChange:e=>{const t=d(i);e.target.value==="direction"&&(t[o].destination={type:"direction",directions:["left"]}),e.target.value==="slot"&&(t[o].destination={type:"slot",slot:1}),a(t)},variant:"standard",children:["direction","slot"].map(e=>l(f,{value:e,children:e},e))}),n.destination.type==="direction"&&l(v,{IconComponent:null,value:n.destination.directions,variant:"standard",multiple:!0,onChange:e=>{const t=d(i);t[o].destination.directions=e.target.value,a(t)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.destination.type==="slot"&&l(b,{type:"number",value:n.destination.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].destination.slot=parseInt(e.target.value)||0,a(t)}})]}),Me=(n,o,i,a)=>p("span",{children:["Give:"," ",l(K,{fontSize:"small"}),l(ie,{fontSize:"small"}),l(re,{fontSize:"small"})," ",l(v,{IconComponent:null,value:n.direction.type,onChange:e=>{const t=d(i);e.target.value==="direction"&&(t[o].direction={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].direction={type:"slot",slot:1}),a(t)},variant:"standard",children:["direction","slot"].map(e=>l(f,{value:e,children:e},e))}),l(v,{IconComponent:null,value:n.direction.value,variant:"standard",onChange:e=>{const t=d(i);t[o].direction.value=e.target.value,a(t)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.direction.type==="slot"&&l(b,{type:"number",value:n.direction.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].direction.slot=parseInt(e.target.value)||0,a(t)}})]}),Ae=(n,o,i,a)=>p("span",{children:["Take"," ",l(K,{fontSize:"small"}),l(ae,{fontSize:"small"}),l(re,{fontSize:"small"})," ",l(v,{IconComponent:null,value:n.direction.type,onChange:e=>{const t=d(i);e.target.value==="direction"&&(t[o].direction={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].direction={type:"slot",slot:1}),a(t)},variant:"standard",children:["direction","slot"].map(e=>l(f,{value:e,children:e},e))}),l(v,{IconComponent:null,value:n.direction.value,variant:"standard",onChange:e=>{const t=d(i);t[o].direction.value=e.target.value,a(t)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.direction.type==="slot"&&l(b,{type:"number",value:n.direction.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].direction.slot=parseInt(e.target.value)||0,a(t)}})]}),Te=(n,o,i,a)=>p("span",{children:["Goto:"," ",l(v,{IconComponent:null,value:n.step,variant:"standard",onChange:e=>{const t=d(i);t[o].step=e.target.value,a(t)},children:Object.keys(i).map(e=>l(f,{value:e,children:e},e))})]}),Je=(n,o,i,a)=>p("span",{children:["If:"," ",l(v,{IconComponent:null,value:n.conditions[0].value1.type,onChange:e=>{const t=d(i);e.target.value==="myitem"&&(t[o].conditions[0].value1={type:"myitem"}),e.target.value==="direction"&&(t[o].conditions[0].value1={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].conditions[0].value1={type:"slot",slot:1}),a(t)},variant:"standard",children:["direction","myitem","slot"].map(e=>l(f,{value:e,children:e},e))}),n.conditions[0].value1.type==="direction"&&l(v,{IconComponent:null,value:n.conditions[0].value1.value,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].value1.value=e.target.value,a(t)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.conditions[0].value1.type==="slot"&&l(b,{type:"number",value:n.conditions[0].value1.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].value1.slot=parseInt(e.target.value)||0,a(t)}}),l(v,{IconComponent:null,value:n.conditions[0].operation,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].operation=e.target.value,a(t)},children:["==",">","<",">=","<="].map(e=>l(f,{value:e,children:e},e))}),l(v,{IconComponent:null,value:n.conditions[0].value2.type,onChange:e=>{const t=d(i);e.target.value==="number"&&(t[o].conditions[0].value2={type:"number",value:0}),e.target.value==="myitem"&&(t[o].conditions[0].value2={type:"myitem"}),e.target.value==="direction"&&(t[o].conditions[0].value2={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].conditions[0].value2={type:"slot",slot:1}),e.target.value==="something"&&(t[o].conditions[0].value2={type:"something"}),e.target.value==="empty"&&(t[o].conditions[0].value2={type:"empty"}),e.target.value==="hole"&&(t[o].conditions[0].value2={type:"hole"}),e.target.value==="character"&&(t[o].conditions[0].value2={type:"character"}),a(t)},variant:"standard",children:["number","direction","slot","myitem","something","empty","hole","character","box"].map(e=>l(f,{value:e,children:e},e))}),n.conditions[0].value2.type==="number"&&l(b,{type:"number",value:n.conditions[0].value2.value,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].value2.value=parseInt(e.target.value)||0,a(t)}}),n.conditions[0].value2.type==="direction"&&l(v,{IconComponent:null,value:n.conditions[0].value2.value,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].value2.value=e.target.value,a(t)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.conditions[0].value2.type==="slot"&&l(b,{type:"number",value:n.conditions[0].value2.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].conditions[0].value2.slot=parseInt(e.target.value)||0,a(t)}})]}),Fe=()=>"Pickup",Be=()=>"Drop",Ge=(n,o,i,a)=>p("span",{children:["Near:"," ",l(b,{type:"number",value:n.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].slot=parseInt(e.target.value)||0,a(t)}}),l(v,{IconComponent:null,value:n.find,onChange:e=>{const t=d(i);t[o].find=e.target.value,a(t)},variant:"standard",children:["box","wall","hole","character","printer","shredder"].map(e=>l(f,{value:e,children:e},e))})]}),Pe=(n,o,i,a)=>p("span",{children:["Variable"," ",l(b,{type:"number",value:n.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].slot=parseInt(e.target.value)||0,a(t)}}),l(v,{IconComponent:null,value:n.value.type,onChange:e=>{const t=d(i);e.target.value==="number"&&(t[o].value={type:"number",value:0}),e.target.value==="myitem"&&(t[o].value={type:"myitem"}),e.target.value==="direction"&&(t[o].value={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].value={type:"slot",slot:1}),a(t)},variant:"standard",children:["number","direction","slot","myitem"].map(e=>l(f,{value:e,children:e},e))}),n.value.type==="number"&&l(b,{type:"number",value:n.value.value,variant:"standard",onChange:e=>{const t=d(i);t[o].value.value=parseInt(e.target.value)||0,a(t)}}),n.value.type==="direction"&&l(v,{IconComponent:null,value:n.value.value,variant:"standard",onChange:e=>{const t=d(i);t[o].value.value=e.target.value,a(t)},children:["left","right","top","bottom","here","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.value.type==="slot"&&l(b,{type:"number",value:n.value.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].value.slot=parseInt(e.target.value)||0,a(t)}})]}),We=(n,o,i,a)=>p("span",{children:["Say:"," ",l(b,{value:n.text,variant:"standard",onChange:e=>{const t=d(i);t[o].text=e.target.value,a(t)}}),l(v,{IconComponent:null,value:n.target.type,onChange:e=>{const t=d(i);e.target.value==="direction"&&(t[o].target={type:"direction",value:"left"}),e.target.value==="slot"&&(t[o].target={type:"slot",slot:1}),a(t)},variant:"standard",children:["direction","slot"].map(e=>l(f,{value:e,children:e},e))}),l(v,{IconComponent:null,value:n.target.value,variant:"standard",onChange:e=>{const t=d(i);t[o].target.value=e.target.value,a(t)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),n.target.type==="slot"&&l(b,{type:"number",value:n.target.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].target.slot=parseInt(e.target.value)||0,a(t)}})]}),qe=(n,o,i,a)=>p("span",{children:["Hear:"," ",l(b,{value:n.text,variant:"standard",onChange:e=>{const t=d(i);t[o].text=e.target.value,a(t)}})]}),Ve=(n,o,i,a)=>p("span",{children:["Foreach:"," ",l(v,{IconComponent:null,value:n.directions,variant:"standard",multiple:!0,onChange:e=>{const t=d(i);t[o].directions=e.target.value,a(t)},children:["left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"].map(e=>p(f,{value:e,children:[A(e),e]},e))}),l(b,{type:"number",value:n.slot,variant:"standard",onChange:e=>{const t=d(i);t[o].slot=parseInt(e.target.value)||0,a(t)}})]});function He(n,o,i,a,e){let t=null;return n.type==="step"&&(t=De(n,o,i,a)),n.type==="give"&&(t=Me(n,o,i,a)),n.type==="take"&&(t=Ae(n,o,i,a)),n.type==="goto"&&(t=Te(n,o,i,a)),n.type==="if"&&(t=Je(n,o,i,a)),n.type==="endif"&&(t="Endif"),n.type==="pickup"&&(t=Fe()),n.type==="drop"&&(t=Be()),n.type==="near"&&(t=Ge(n,o,i,a)),n.type==="variable"&&(t=Pe(n,o,i,a)),n.type==="say"&&(t=We(n,o,i,a)),n.type==="hear"&&(t=qe(n,o,i,a)),n.type==="foreach"&&(t=Ve(n,o,i,a)),n.type==="endforeach"&&(t="Endforeach"),t||(t=JSON.stringify(n)),n.type==="endif"&&(e-=20),n.type==="endforeach"&&(e-=20),t=p("span",{children:[o,": ",l("span",{style:{paddingLeft:e},children:t}),l(we,{size:"small",onMouseDown:()=>{const r=[...i],y=r[o];r.splice(o,1),y.type==="if"&&r.splice(r.findIndex(g=>g.type==="endif"&&g.ifId===y.id),1),y.type==="endif"&&r.splice(r.findIndex(g=>g.type==="if"&&g.id===y.ifId),1),y.type==="foreach"&&r.splice(r.findIndex(g=>g.type==="endforeach"&&g.foreachId===y.id),1),y.type==="endforeach"&&r.splice(r.findIndex(g=>g.type==="foreach"&&g.id===y.foreachId),1),a(r)},children:l(be,{fontSize:"small"})})]},o),n.type==="if"&&(e+=20),n.type==="foreach"&&(e+=20),{result:t,intend:e}}const Ke=Ce(({children:n})=>l("div",{children:n})),Qe=Ie(({children:n})=>l("div",{children:n}));function Ue(n){const[o,i]=k.exports.useState(n.level),[a,e]=k.exports.useState(n.level.characters),[t,r]=k.exports.useState(n.level.code),[y,g]=k.exports.useState(!1),[q,V]=k.exports.useState(-1),[T,c]=k.exports.useState(1e3);k.exports.useEffect(()=>{i(n.level),e(n.level.characters),r(n.level.code)},[n.level]),k.exports.useEffect(()=>{if(!y)return;const m=setInterval(()=>V(u=>u+1),T);return()=>clearInterval(m)},[T,y]),k.exports.useEffect(()=>{if(q===-1)return;const m=d(a),u=d(o),C=[];m.forEach((s,x)=>{var B,$,J,G,N,ee,te,ne,oe;if(C[x]=s.coordinates,s.terminated||(s.step++,s.step===-1))return;const w=t[s.step];if(!w)return;const E=F(s.coordinates);if(w.type==="step"){const I=Ee(w.destination.directions),L=W(E,I),P=o.cells[L.join("x")];P&&["empty","hole"].includes(P.type)&&(C[x]=L.join("x"))}if(w.type==="goto"&&(s.step=w.step-1),w.type==="pickup"&&!s.item&&((B=u.cells[s.coordinates].item)==null?void 0:B.type)==="box"&&(s.item=u.cells[s.coordinates].item,delete u.cells[s.coordinates].item),w.type==="drop"&&(($=s.item)==null?void 0:$.type)==="box"&&!u.cells[s.coordinates].item&&(u.cells[s.coordinates].item=s.item,delete s.item),w.type==="take"){const I=W(E,w.direction.value).join("x");!s.item&&((J=u.cells[I])==null?void 0:J.type)==="printer"&&(s.item={type:"box",value:se(0,99)},u.cells[I].printed++)}if(w.type==="give"){const I=W(E,w.direction.value).join("x");s.item&&((G=u.cells[I])==null?void 0:G.type)==="shredder"&&(delete s.item,u.cells[I].shredded++)}if(w.type==="if"){let I=!1;const L=w.conditions[0],P=W(E,L.value1.value).join("x");if(u.cells[P]){const R=((ee=(N=a.find(ye=>L.value1.value!=="here"&&ye.coordinates===P))==null?void 0:N.item)==null?void 0:ee.value)||((ne=(te=u.cells[P])==null?void 0:te.item)==null?void 0:ne.value)||0;let z=0;L.value2.type==="number"&&(z=L.value2.value),L.value2.type==="myitem"&&(z=((oe=s.item)==null?void 0:oe.value)||0),L.operation==="=="&&(I=R===z),L.operation==="!="&&(I=R!==z),L.operation===">"&&(I=R>z),L.operation==="<"&&(I=R<z),L.operation==="<="&&(I=R<=z),L.operation===">="&&(I=R>=z)}if(!I){let R=0;for(R=s.step;R<t.length&&t[R].type!=="endif";R++);s.step=R}}}),m.forEach((s,x)=>{!t[s.step]||(!a.find(E=>E.coordinates===C[x])||a.find((E,B)=>E.coordinates===C[x]&&s.coordinates===C[B])?(s.coordinates=C[x],o.cells[s.coordinates].type==="hole"&&(s.terminated=!0)):t[s.step].type==="step"&&s.step--)});const S=[];m.forEach((s,x)=>{var E;const w=t[s.step];if(!!w&&!S.includes(s.name)&&w.type==="give"&&((E=s.item)==null?void 0:E.type)==="box"){const B=W(F(s.coordinates),w.direction.value),$=m.find(G=>G.coordinates===B.join("x")),J=$?t[$.step]:null;if($)if(!$.item)$.item=s.item,delete s.item,S.push($.name);else if($.item&&(J==null?void 0:J.type)==="give"&&W(F($.coordinates),J.direction.value).join("x")===s.coordinates){const G=s.item;s.item=$.item,$.item=G,S.push($.name)}else s.step--}}),e(m),i(u)},[q]);let h=0;const O=k.exports.useMemo(()=>t.map((m,u)=>{const C=He(m,u,t,r,h);return h=C.intend,C.result}),[t]);return p(Q,{container:!0,children:[p(Q,{item:!0,md:6,children:[l("h2",{children:o.task}),l("h4",{children:y&&n.level.win(o.cells,a)?"Win":null}),l(pe,{cells:o.cells,characters:a,width:o.width,height:o.height,run:y,speed:T})]}),l(Q,{item:!0,md:1,children:l(ze,{code:t,setCode:r})}),l(Q,{item:!0,md:5,children:p("div",{style:{paddingLeft:20},children:[l(Qe,{onSortEnd:({oldIndex:m,newIndex:u},C)=>{if(C.ctrlKey){const S=d(t);S.splice(u,0,t[m]),r(S)}else{const S=ke(t,m,u),s=[];if(S.forEach(x=>{x.type==="if"&&s.push(x.id),x.type==="endif"&&s[s.length-1]===x.ifId&&s.splice(s.indexOf(x.ifId),1),x.type==="foreach"&&s.push(x.id),x.type==="endforeach"&&s[s.length-1]===x.foreachId&&s.splice(s.indexOf(x.foreachId),1)}),s.length)return;r(S)}},children:t.map((m,u)=>p(Ke,{index:u,children:[a.filter(S=>S.step===u).map(S=>l("span",{children:l(K,{fontSize:"small",style:{color:S.color}})},S.name)),O[u]]},u))}),p("div",{style:{paddingTop:20},children:["Speed:"," ",l("input",{type:"number",value:1e3/T,onChange:m=>c(1e3/(parseInt(m.target.value)||1))})]}),l("div",{children:l(D,{onClick:()=>{const m=d(n.level);y||Object.values(m.cells).forEach(u=>{var C;((C=u.item)==null?void 0:C.isRandom)&&(u.item.value=se(0,99))}),i(m),e(n.level.characters),g(!y)},disabled:h!==0,children:y?"Stop":"Run"})}),l("div",{children:l(D,{onClick:()=>U(JSON.stringify(t,null,2)),children:"Copy"})})]})})]})}const Xe={task:"Remove two boxes",width:5,height:7,cells:M(`box|1 box|1 empty box|1 empty
empty empty wall box|2 empty
empty empty wall box|3 empty
empty empty empty box|4 empty
empty empty empty box|5 empty
hole hole
hole hole`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[],win:(n,o)=>Object.values(n).filter(i=>{var a;return((a=i.item)==null?void 0:a.type)==="box"}).length+o.filter(i=>{var a;return!i.terminated&&((a=i.item)==null?void 0:a.type)==="box"}).length===5},Ye={task:"Move boxes",width:5,height:5,cells:M(`box|1 box|1 empty box|1 empty
empty empty wall box|2 empty
empty empty wall box|3 empty
empty empty empty box|4 empty
empty empty empty box|5 empty`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"pickup"},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"step",destination:{type:"direction",directions:["left","right","top","bottom"]}},{type:"drop"},{type:"goto",step:0}],win:(n,o)=>Object.values(n).filter(i=>{var a;return((a=i.item)==null?void 0:a.type)==="box"}).length+o.filter(i=>{var a;return((a=i.item)==null?void 0:a.type)==="box"}).length===5},Ze={task:"Remove only box with 2",width:5,height:7,cells:M(`empty empty empty empty empty
box|2|tag2 box|1|tag1 wall empty empty
empty empty wall empty empty
empty empty empty empty empty
empty empty empty empty empty
hole hole
hole hole`),characters:[{coordinates:"0x0",name:"first",color:"red",step:-1},{coordinates:"1x0",name:"second",color:"green",step:-1}],code:[{type:"step",destination:{type:"direction",directions:["bottom"]}},{type:"if",conditions:[{value1:{type:"direction",value:"here"},operation:">",value2:{type:"number",value:1}}],id:"if1"},{type:"pickup"},{type:"endif",ifId:"if1"},{type:"goto",step:0}],win:(n,o)=>(Object.values(n).find(i=>{var a;return((a=i.item)==null?void 0:a.tag)==="tag1"})||o.find(i=>{var a;return((a=i.item)==null?void 0:a.tag)==="tag1"}))&&!(Object.values(n).find(i=>{var a;return((a=i.item)==null?void 0:a.tag)==="tag2"})||o.find(i=>{var a;return!i.terminated&&((a=i.item)==null?void 0:a.tag)==="tag2"}))},Ne={task:"Diagonal boxes",width:5,height:7,cells:M(`empty empty empty empty empty
box|1 box|1 box|1 box|1 box|1
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"1x1",name:"first",color:"red",step:-1},{coordinates:"2x1",name:"second",color:"green",step:-1},{coordinates:"3x1",name:"3",color:"yellow",step:-1},{coordinates:"4x1",name:"4",color:"blue",step:-1}],code:[],win:(n,o)=>[0,1,2,3,4].every(i=>{var a;return((a=n[`${i}x${i+1}`].item)==null?void 0:a.type)==="box"})},et={task:"Sort numbers",width:5,height:5,cells:M(`empty empty empty empty empty
box|random box|random box|random box|random box|random
empty empty empty empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"0x1",name:"1",color:"purple",step:-1},{coordinates:"1x1",name:"2",color:"red",step:-1},{coordinates:"2x1",name:"3",color:"green",step:-1},{coordinates:"3x1",name:"4",color:"yellow",step:-1},{coordinates:"4x1",name:"5",color:"blue",step:-1}],code:[{type:"pickup"},{type:"if",id:"if1",conditions:[{value1:{type:"direction",value:"right"},operation:"<",value2:{type:"myitem"}}]},{type:"give",direction:{type:"direction",value:"right"}},{type:"endif",ifId:"if1"},{type:"if",id:"if2",conditions:[{value1:{type:"direction",value:"left"},operation:">",value2:{type:"myitem"}}]},{type:"give",direction:{type:"direction",value:"left"}},{type:"endif",ifId:"if2"},{type:"goto",step:1}],win:(n,o)=>[0,1,2,3,4].every(i=>{var a,e,t,r;return i===0||((e=(a=de(o,`${i}x1`))==null?void 0:a.item)==null?void 0:e.value)>=((r=(t=de(o,`${i-1}x1`))==null?void 0:t.item)==null?void 0:r.value)})},tt={task:"Print and shred 10 boxes",width:5,height:5,cells:M(`empty empty empty empty empty
empty empty empty empty empty
empty printer shredder empty empty
empty empty empty empty empty
empty empty empty empty empty`),characters:[{coordinates:"1x1",name:"first",color:"red",step:-1},{coordinates:"2x1",name:"second",color:"green",step:-1}],code:[],win:(n,o)=>n["2x2"].shredded>=10},nt={task:"Print and shred 10 boxes (no move)",width:7,height:5,cells:M(`hole hole hole hole hole hole hole
hole empty empty empty empty empty hole
hole printer hole hole hole shredder hole
hole hole hole hole hole hole hole
hole hole hole hole hole hole hole`),characters:[{coordinates:"1x1",name:"1",color:"purple",step:-1},{coordinates:"2x1",name:"2",color:"red",step:-1},{coordinates:"3x1",name:"3",color:"green",step:-1},{coordinates:"4x1",name:"4",color:"yellow",step:-1},{coordinates:"5x1",name:"5",color:"blue",step:-1}],code:[],win:(n,o)=>n["5x2"].shredded>=10},X=[Xe,Ye,Ze,Ne,et,tt,nt];function ot(n){var V,T;const[o,i]=k.exports.useState({cells:M("empty"),code:[],characters:[],height:1,width:1,task:"",win:(c,h)=>!1}),[a,e]=k.exports.useState(!1),t=o.cells[a],[r,y]=k.exports.useState(0),g=(c,h)=>{const O=d(o);for(let m=0;m<c;m++)for(let u=0;u<h;u++)O.cells[`${m}x${u}`]||(O.cells[`${m}x${u}`]={type:"nothing"});O.width=c,O.height=h,i(O)},q=`{
        task: ${JSON.stringify(o.task)},
        code: [],
        cells: \`${Z(o.cells)}\`,
        characters: ${JSON.stringify(o.characters,null,2)},
        width: ${o.width},
        height: ${o.height},
        win: ${((V=o.win)==null?void 0:V.toString())||"null"}
    }`;return p("div",{children:[p("div",{children:[l(v,{variant:"standard",value:r,onChange:c=>y(parseInt(c.target.value)),children:X.map((c,h)=>l(f,{value:h,children:c.task},h))}),l(D,{onClick:()=>i(X[r]),children:"Import"})]}),p("div",{children:[l(b,{label:"width",value:o.width,variant:"standard",onChange:c=>g(parseInt(c.target.value),o.height)}),l(b,{label:"height",value:o.height,variant:"standard",onChange:c=>g(o.width,parseInt(c.target.value))}),l(D,{onClick:()=>{const c=d(o);Object.keys(c.cells).forEach(h=>{const O=F(h);(O[0]>c.width-1||O[1]>c.height-1)&&delete c.cells[h]}),i(c)},children:"Crop"})]}),l(pe,{cells:o.cells,characters:o.characters,width:o.width,height:o.height,run:!1,speed:0,onClick:c=>e(c)}),p("div",{children:[p("div",{children:[l(D,{onClick:()=>U(Z(o.cells)),children:"Copy cells"}),l(D,{onClick:()=>U(JSON.stringify(o.characters,null,2)),children:"Copy characters"}),l(D,{onClick:()=>U(q),children:"Copy level"})]}),p("pre",{children:[l("div",{children:q}),l("div",{children:Z(o.cells)}),l("div",{children:JSON.stringify(o,(c,h)=>typeof h=="function"?`${h}`:h,2)})]})]}),p(Se,{open:a!==!1,onClose:()=>e(!1),children:[l($e,{children:a}),p(Le,{children:[l("div",{children:l(v,{value:t==null?void 0:t.type,onChange:c=>{const h=d(o);h.cells[a].type=c.target.value,i(h)},children:["nothing","empty","printer","shredder","wall"].map(c=>l(f,{value:c,children:c},c))})}),(t==null?void 0:t.type)==="empty"?p("div",{children:["Item:"," ",l(Y,{checked:!!(t==null?void 0:t.item),onChange:c=>{const h=d(o);h.cells[a].item=c.target.checked?{type:"box",value:0}:null,i(h)}})]}):null,(t==null?void 0:t.item)?l("div",{children:l(b,{label:"Item value",value:(T=t==null?void 0:t.item)==null?void 0:T.value,variant:"standard",onChange:c=>{const h=d(o);h.cells[a].item.value=parseInt(c.target.value),i(h)}})}):null,(t==null?void 0:t.type)==="empty"?p("div",{children:["Character:"," ",l(Y,{checked:!!o.characters.find(c=>c.coordinates===a),onChange:c=>{const h=d(o);c.target.checked?h.characters.push({color:"green",name:`${h.characters.length+1}`,step:-1,coordinates:a}):h.characters.splice(h.characters.findIndex(O=>O.coordinates===a),1),i(h)}})]}):null]})]})]})}function at(){const[n,o]=k.exports.useState(0),[i,a]=k.exports.useState(!1);return p("div",{className:"App",children:[l("h1",{children:"Open7BH"}),p("div",{children:["Editor:"," ",l(Y,{onChange:e=>a(e.target.checked),checked:i})]}),i?l(ot,{}):p(H,{children:[l("div",{children:l(v,{variant:"standard",value:n,onChange:e=>o(parseInt(e.target.value)),children:X.map((e,t)=>l(f,{value:t,children:e.task},t))})}),l(Ue,{level:X[n]})]})]})}const it="modulepreload",ce={},lt="./",rt=function(o,i){return!i||i.length===0?o():Promise.all(i.map(a=>{if(a=`${lt}${a}`,a in ce)return;ce[a]=!0;const e=a.endsWith(".css"),t=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${t}`))return;const r=document.createElement("link");if(r.rel=e?"stylesheet":it,e||(r.as="script",r.crossOrigin=""),r.href=a,document.head.appendChild(r),e)return new Promise((y,g)=>{r.addEventListener("load",y),r.addEventListener("error",g)})})).then(()=>o())},st=n=>{n&&n instanceof Function&&rt(()=>import("./web-vitals.67dce932.js"),[]).then(({getCLS:o,getFID:i,getFCP:a,getLCP:e,getTTFB:t})=>{o(n),i(n),a(n),e(n),t(n)})},dt=Oe.createRoot(document.getElementById("root"));dt.render(l(Re.StrictMode,{children:l(at,{})}));st();
